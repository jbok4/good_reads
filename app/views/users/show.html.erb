<%= link_to 'Back', users_path %>

<div class="panel panel-default">
  <div class="panel-body">
    <div class="row">
        <div class="col-md-8">

<p class="userName"><strong>User: </strong><%= @user.name %></p>

<p class="userEmail"><strong>Email: </strong><%= @user.email %></p></br>

<a href="#" class="js-reviews" data-id="<%=@user.id%>">Reviews</a></br>
<p id="inject"></p>

<%#= link_to "Load Reviews", user_reviews_path(@user), :class => "userReviews" %>

          <a href="#" class="js-next" data-id="<%=@user.id%>">Next...</a>
        </div>

    </div>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-next").on("click", function() {
    var nextId = parseInt($(".js-next").attr("data-id")) + 1;
    $.get("/users/" + nextId + ".json", function(data) {
 
      var user = data["user"];
      $(".userName").text("User: " + user["name"]);
      $(".userEmail").text("Email: " + user["email"]);

      // re-set the id to current on the link
      $(".js-next").attr("data-id", user["id"]);
      // re-set the reviews to blank
      $("#inject").html("");

    });
    event.preventDefault();
  });
// this works to load the users most recent review. 
  $(".js-reviews").on("click", function() {
    var nextId = parseInt($(".js-next").attr("data-id"));
    $.get("/users/" + nextId + ".json", function(data) {
 
      var user = data["user"];
      $("#inject").text("Most Recent Review: " + user["reviews"][user.reviews.length-1]["comment"]);

    });
    event.preventDefault();
  });
});


// trying to load all the users reviews
// $(".js-reviews").on("click", function(e) {
//   $.ajax({
//     url: this.href,
//     datatype: 'script'
//   })
//   e.preventDefault();
// })
// })
</script>