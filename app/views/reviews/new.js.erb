// Links with write a review link on book show page 
// renders form partial and escapes the html with js


  $("#book_review").hide().after('<%= j render("form") %>');



function Review(attributes){
  this.comment = attributes.comment;
  this.rating = attributes.rating;
  this.id = attributes.id;
  this.user_id = attributes.user_id;
  this.created_at = attributes.created_at;
}

// Review.prototype.renderTemplate = function() {
  
// }

$(function(){
  $('#new_review').on('submit', function(e) {
    

    var $form = $(this);
    var action = $form.attr("action");
    var params = $form.serialize();

    $.ajax({
        url: action,
        data: params,
        dataType: "json",
        method: "POST",
        success: function(json) {
          var source   = $("#entry-template").html();
          var template = Handlebars.compile(source);
          var html    = template(json);
          // console.log(json)
          $("#place-here").prepend(html);


      }, error:  function(jqxhr, textStatus, error) {
        console.log(jqxhr, textStatus, error)
      }

    })
    e.preventDefault();

  })

})
